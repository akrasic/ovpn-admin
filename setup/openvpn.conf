# server 172.16.100.0 255.255.255.0
verb 3
tls-server

# Certificates
ca /etc/openvpn/easyrsa/pki/ca.crt
key /etc/openvpn/easyrsa/pki/private/server.key
cert /etc/openvpn/easyrsa/pki/issued/server.crt
dh /etc/openvpn/easyrsa/pki/dh.pem
crl-verify /etc/openvpn/easyrsa/pki/crl.pem

# TLS hardening
tls-auth /etc/openvpn/easyrsa/pki/ta.key
key-direction 0
tls-version-min 1.2
remote-cert-tls client

# Encryption (modern AEAD cipher with fallback)
data-ciphers AES-256-GCM:AES-128-GCM:CHACHA20-POLY1305
data-ciphers-fallback AES-256-CBC
auth SHA256

# Connection settings
keepalive 10 60
persist-key
persist-tun
topology subnet

# Privilege dropping
user nobody
group nogroup

# Logging
status /tmp/openvpn-status.log

# Client configuration
push "topology subnet"
push "route-metric 9999"
# Routes and DNS are added dynamically by configure.sh based on environment variables

#duplicate-cn
#proto tcp
#port 1194
#dev tun0
#management 127.0.0.1 8989
